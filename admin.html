<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    h1.color-global {
      font-weight: 700;
      letter-spacing: 1px;
      text-transform: uppercase;
      border-left: 5px solid #0d6efd;
      padding-left: 12px;
    }

    table {
      border-radius: 10px;
      overflow: hidden;
    }

    .table {
      background: #ffffff;
    }

    .table thead th {
      background: #0d6efd;
      color: #fff;
      text-align: center;
      font-size: 15px;
      vertical-align: middle;
    }

    .table tbody tr:nth-child(odd) {
      background: #f8f9fa;
    }


    .table tbody tr:hover {
      background: #e7f1ff;
      cursor: pointer;
      transition: 0.2s;
    }


    .table td,
    .table th {
      vertical-align: middle !important;
    }


    .table {
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
    }


    .badge-rendah {
      background: #20c997;
    }

    .badge-sedang {
      background: #ffc107;
    }

    .badge-tinggi {
      background: #dc3545;
      color: white;
    }
  </style>

</head>

<body>
  <div class="container mt-4">
    <h1 class="mb-4 color-global text-primary">Admin Dashboard</h1>

    <!-- Tabs -->
    <ul class="nav nav-tabs" id="adminTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="kecamatan-tab" data-bs-toggle="tab" data-bs-target="#kecamatan"
          type="button" role="tab">Kecamatan</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="desa-tab" data-bs-toggle="tab" data-bs-target="#desa" type="button"
          role="tab">Desa</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="laporan-tab" data-bs-toggle="tab" data-bs-target="#laporan" type="button"
          role="tab">Laporan Banjir</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="risiko-tab" data-bs-toggle="tab" data-bs-target="#risiko" type="button"
          role="tab">Risiko Banjir</button>
      </li>
    </ul>

    <!-- Tab Content -->
    <div class="tab-content mt-3" id="adminTabContent">
      <!-- Kecamatan -->
      <div class="tab-pane fade show active" id="kecamatan" role="tabpanel">
        <button class="btn btn-primary mb-2" onclick="showTambahKecamatanForm()">Tambah Kecamatan</button>
        <div id="kecamatan-form" class="mb-3" style="display:none;">
          <input type="text" id="kode_kec" placeholder="Kode Kecamatan" class="form-control mb-2">
          <input type="text" id="nama_kecamatan" placeholder="Nama Kecamatan" class="form-control mb-2">
          <input class="form-control mb-2" type="number" id="luas" placeholder="Luas Kecamatan" />
          <textarea class="form-control mb-2" id="geom" placeholder='Geom (GeoJSON)'></textarea>

          <button class="btn btn-primary" onclick="tambahKecamatan()">Simpan</button>
        </div>
        <table class="table table-bordered" id="tableKecamatan">
          <thead>
            <tr>
              <th>ID</th>
              <th>Kode</th>
              <th>Nama</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <!-- Desa -->
      <div class="tab-pane fade" id="desa" role="tabpanel">
        <button class="btn btn-primary mb-2" onclick="showTambahDesaForm()">Tambah Desa</button>
        <div id="desa-form" class="mb-3" style="display:none;">
          <input type="text" id="kode_desa" placeholder="Kode Desa" class="form-control mb-2">
          <input type="text" id="nama_desa" placeholder="Nama Desa" class="form-control mb-2">
          <input type="number" id="id_kecamatan_desa" placeholder="ID Kecamatan" class="form-control mb-2">
          <input type="number" id="luas_desa" placeholder="Luas" class="form-control mb-2">
          <input type="number" id="jumlah_penduduk" placeholder="Jumlah Penduduk" class="form-control mb-2">
          <textarea id="geom_desa" placeholder="Geom JSON" class="form-control mb-2"></textarea>
          <button class="btn btn-primary" onclick="tambahDesa()">Simpan</button>
        </div>
        <table class="table table-bordered" id="tableDesa">
          <thead>
            <tr>
              <th>Kode</th>
              <th>Nama</th>
              <th>Kecamatan</th>
              <th>Luas</th>
              <th>Penduduk</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <!-- Laporan Banjir -->
      <div class="tab-pane fade" id="laporan" role="tabpanel">
        <table class="table table-bordered" id="tableLaporan">
          <thead>
            <tr>
              <th>ID</th>
              <th>Latitude</th>
              <th>Longitude</th>
              <th>Tinggi Air</th>
              <th>Deskripsi</th>
              <th>Status</th>
              <th>Verifikasi</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <!-- Risiko Banjir -->
      <div class="tab-pane fade" id="risiko" role="tabpanel">
        <table class="table table-bordered" id="tableRisiko">
          <thead>
            <tr>
              <th>ID Desa</th>
              <th>Nama Desa</th>
              <th>Rata-Tinggi Air</th>
              <th>Kategori</th>
              <th>Jumlah Laporan</th>
              <th>Terakhir Diperbarui</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>

  <script>
    const token = localStorage.getItem("token_secret");
    const exp = localStorage.getItem("token_exp");

    if (!token || !exp) {
      window.location.href = "login.html";
    } else {
      const now = Date.now();

      if (now > exp) {
        localStorage.removeItem("token_secret");
        localStorage.removeItem("token_exp");
        alert("Session expired, silakan login ulang");
        window.location.href = "login.html";
      }
    }
  </script>


  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/js/admin.js"></script>
</body>

</html>